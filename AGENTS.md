# AGENTS.md - Руководство для ИИ-агентов

## Команды сборки/тестирования
- **Тесты**: `pytest` для полного набора или `python3 -m unittest discover` для базовых тестов
- **Одиночный тест**: `python3 server/test_config.py` (файлы test_*.py можно запускать напрямую)
- **Docker**: не использовать локальный сервер не имеющий GPU
- **Деплой**: `make deploy` на удаленный сервер genaminipc.awg
- **Логи**: `make docker-logs` (локально) или `make remote-logs` (удаленно)

## Стиль кода
- **Язык**: Русский в комментариях и логах, английский в коде
- **Форматирование**: 4 пробела, без tabs, максимум 120 символов в строке
- **Импорты**: Группировка - стандартная библиотека, внешние пакеты, локальные модули
- **Типизация**: Используйте type hints где возможно (`typing.Optional`, `Union`, `Dict`)
- **Именование**: snake_case для функций/переменных, PascalCase для классов
- **Строки**: f-строки предпочтительнее .format() или %

## Архитектура
- **Клиент-сервер**: WebSocket соединения на портах 8011 (control) и 8012 (data)
- **Конфигурация**: Через переменные окружения (см. env_config.py)
- **Логирование**: Используйте logger с уровнем INFO для Docker совместимости
- **Асинхронность**: asyncio для WebSocket и audio обработки

## Обработка ошибок
- Всегда логируйте ошибки с контекстом
- Graceful fallback с GPU на CPU при недоступности CUDA
- WebSocket reconnection логика в клиенте обязательна
- Валидация конфигурации на старте сервера

Код должен быть production-ready с комплексной диагностикой GPU/памяти.